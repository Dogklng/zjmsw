<include file="Public:head"/>
<script src="__LAYDATE__/laydate.js"></script>
<style>
	.imgnav{
		max-height: 30px;
		overflow: hidden;
		cursor: pointer;
	}
	.imgwrapper{
		display: block;
		width: 78px;
		height: 78px;
		overflow: hidden;
	}
	.imgwrapper img{
		display: block;
		width: 100%;
		padding: 0;
		margin: 0;
		border:0;
	}
	.spanpd10{
		margin:10px;
	}
	.wxtables.wxtables-sku.newtable{
		width: 40%;
		margin: 0;
	}
	.img-list li{
		width: 60px;
		height:60px;
	}
    .input{
      height: 30px;
    }
	.cst_h3 span{font-weight: normal;}
	#imgdiv img{ max-width:190px; max-height:190px; display:none; margin:5px;}
	.btnimage{width:80px; height:30px; background:white; border:1px solid #d9d9d9;cursor:pointer; position:relative; text-align:center; line-height:31px;}
	.file{ position:absolute; top:0px; left:0; width:80px; height:30px; background:white; border:1px solid #d9d9d9;cursor:pointer; opacity:0}
	#imgdiv2 img{ max-width:88px; max-height:88px; display:none; margin:5px;}
	#xuanze2{ width:60px; height:30px; background:white; border:1px solid #d9d9d9; }
	#xuanze2:hover{ background:#E6E6E6; }
	.huase{display:none; width:86px; height:30px; margin:5px; text-indent:5px;}

</style>
<script type="text/javascript" src="__LHG__/lhgcore.min.js"></script>
<script type="text/javascript" src="__LHG__/lhgcalendar.min.js"></script>

<script type="text/javascript" src="__JS__/jquery-form.js"></script>
<!--<script type="text/javascript" src="__C_JS__/jquery-1.7.1.min.js"></script>-->
<!--<script type="text/javascript" src="__JEDATE__/jedate.js"></script>-->

<div class="container">
  <div class="inner clearfix">
    <include file="Public:left"/>
    <!-- end content-left -->

    <div class="content-right fl">
      <h1 class="content-right-title">添加职位</h1>
      <input type="hidden" id="j-isSid" value="0">
      <!-- 是否选择了淘宝类目 -->
      <input type="hidden" id="j-hasNorms" value="1">
      <!-- 淘宝类目下是否有属性 -->
      <input type="hidden" id="supplier" value="">
      <form aciton="{:U('/Admin/Index/addJoin')}" enctype="multipart/form-data" method="post" id="add_step2" >
        <div class="panel-single panel-single-light mgt20">
          <h3 class="cst_h3 mgb20">基本信息</h3>
            <div class="formitems">
              <label class="fi-name"><span class="colorRed">*</span>职位类别：</label>
              <div class="form-controls">
                <input id="type" name="type" style="padding:0px 5px;width:220px;height:28px;line-height:30px;"/>
                <span class="fi-help-text"></span>
              </div>
            </div>
          <div class="formitems">
            <label class="fi-name"><span class="colorRed">*</span>职位名称：</label>
            <div class="form-controls">
              <input id="name" name="name" style="padding:0px 5px;width:220px;height:28px;line-height:30px;"/>
              <span class="fi-help-text"></span>
            </div>
          </div>
          <div class="formitems">
            <label class="fi-name"><span class="colorRed">*</span>性别要求：</label>
            <div class="form-controls">
              <input type="radio" name="sex" checked value="0" style="margin-left: 10px"/>无
              <input type="radio" name="sex" value="1" style="margin-left: 10px" />男
              <input type="radio" name="sex" value="2" style="margin-left: 10px" />女
              <span class="fi-help-text"></span>
            </div>
          </div>
          <div class="formitems">
            <label class="fi-name"><span class="colorRed">*</span>年龄要求：</label>
            <div class="form-controls">
              <input id="age" name="age" style="padding:0px 5px;width:220px;height:28px;line-height:30px;"/>
              <span class="fi-help-text"></span>
            </div>
          </div>
          <div class="formitems">
            <label class="fi-name"><span class="colorRed">*</span>经验要求：</label>
            <div class="form-controls">
              <input id="experience" name="experience" style="padding:0px 5px;width:220px;height:28px;line-height:30px;"/>
              <span class="fi-help-text"></span>
            </div>
          </div>

          <div class="formitems">
            <label class="fi-name"><span class="colorRed">*</span>学历要求：</label>
            <div class="form-controls">
              <input id="education" name="education" style="padding:0px 5px;width:220px;height:28px;line-height:30px;"/>
              <span class="fi-help-text"></span>
            </div>
          </div>
          <div class="formitems">
            <label class="fi-name"><span class="colorRed">*</span>工作地点：</label>
            <div class="form-controls">
              <input id="workingplace" name="workingplace" style="padding:0px 5px;width:220px;height:28px;line-height:30px;"/>
              <span class="fi-help-text"></span>
            </div>
          </div>
          <div class="formitems">
            <label class="fi-name"><span class="colorRed">*</span>工作性质：</label>
            <div class="form-controls">
              <input id="worknature" name="worknature" style="padding:0px 5px;width:220px;height:28px;line-height:30px;"/>
              <span class="fi-help-text"></span>
            </div>
          </div>
          <div class="formitems">
            <label class="fi-name"><span class="colorRed">*</span>工资待遇：</label>
            <div class="form-controls">
              <input id="salarytreatment" name="salarytreatment" style="padding:0px 5px;width:220px;height:28px;line-height:30px;"/>
              <span class="fi-help-text"></span>
            </div>
          </div>
          <div class="formitems">
            <label class="fi-name"><span class="colorRed">*</span>招聘人数：</label>
            <div class="form-controls">
              <input id="numbers" name="numbers" onkeyup="num(this)" style="padding:0px 5px;width:220px;height:28px;line-height:30px;"/>
              <span class="fi-help-text"></span>
            </div>
          </div>

          <div class="formitems">
            <label class="fi-name"><span class="colorRed">*</span>展示图片：</label>
            <div class="form-controls pdt5 j-imglistPanel">
              <div class="baotuan_showimge fl mgr10">
              </div>
              <div class="btnimage fl">选择图片
                <input type="file"  accept="image/jpg,image/jpeg,image/png" name="baotuan" id="baotuan" class="file" >
              </div>
              <div class="baotuan_progress fl mgr15" style="display:none"><img src="__IMAGES__/loadings.gif" width="30" />
                <span class="baotuan_percent">80%</span>
              </div>
              <span class="fi-help-text fl lh30 mgl10">建议大小（宽542px高633px）</span>
            </div>
          </div>

          <div class="formitems">
            <label class="fi-name"><span class="colorRed">*</span>岗位职责：</label>
            <div class="form-controls">
              <script id="editor" name="responsibility" type="text/plain" style="width:730px;height:300px;"></script>
              <span class="fi-help-text"></span>
            </div>
          </div>
          <div class="formitems">
            <label class="fi-name"><span class="colorRed">*</span>职位简介：</label>
            <div class="form-controls">
              <script id="editor2" name="detail" type="text/plain" style="width:730px;height:300px;"></script>
              <span class="fi-help-text"></span>
            </div>
          </div>
        </div>
        <!-- end 基本信息 -->

    <div class="panel-single panel-single-light mgt20 txtCenter">
      <a href="{:U('Admin/Index/joinList')}" class="btn">取消</a>
      <input type="button" class="btn btn-primary" onclick="toVaild()" value="保存">
    </div>
  </form>
</div>
<!-- end container -->

<include file="Public:foot"/>

    <link href="__UM__/themes/default/css/umeditor.css" type="text/css" rel="stylesheet">
    <script type="text/javascript" src="__UM__/third-party/jquery.min.js"></script>
    <script type="text/javascript" src="__UM__/third-party/template.min.js"></script>
    <script type="text/javascript" charset="utf-8" src="__UM__/umeditor.config.js"></script>
    <script type="text/javascript" charset="utf-8" src="__UM__/umeditor.min.js"></script>
    <script type="text/javascript" src="__UM__/lang/zh-cn/zh-cn.js"></script>


<script type="text/javascript">
  UM.getEditor('editor',{
    toolbars: [

    ['source', 'fontfamily','fontsize','bold','italic', 'underline','forecolor','redo','undo','insertunorderedlist','insertorderedlist','cleardoc', 'justifyleft','justifyright','justifycenter','justifyjustify','insertimage','inserttable','insertrow','insertcol', "mergeright", "mergedown", "deleterow", "deletecol", "splittorows", "splittocols", "splittocells", "deletecaption",  'inserttitle', 'mergecells', 'deletetable','cleardoc','insertparagraphbeforetable', 'edittable', 'edittd']

    ],

    autoHeightEnabled: false,
    autoFloatEnabled: true,
    elementPathEnabled:false,
    enableContextMenu:false,
    wordCount:false,

  });

  UM.getEditor('editor2',{
    toolbars: [

    ['source', 'fontfamily','fontsize','bold','italic', 'underline','forecolor','redo','undo','insertunorderedlist','insertorderedlist','cleardoc', 'justifyleft','justifyright','justifycenter','justifyjustify','insertimage','inserttable','insertrow','insertcol', "mergeright", "mergedown", "deleterow", "deletecol", "splittorows", "splittocols", "splittocells", "deletecaption",  'inserttitle', 'mergecells', 'deletetable','cleardoc','insertparagraphbeforetable', 'edittable', 'edittd']

    ],

    autoHeightEnabled: false,
    autoFloatEnabled: true,
    elementPathEnabled:false,
    enableContextMenu:false,
    wordCount:false,

  });
</script>
    <!--<script type="text/javascript" src="__JS__/jquery.js"></script>-->
  <script type="text/javascript">

      $(function () {
        var percent = $('.baotuan_percent');
        var progress = $('.baotuan_percent');
        $("#baotuan").wrap("<form id='baotuan1' action='{:U('/Admin/Index/addImage')}' method='post' enctype='multipart/form-data'></form>");
        $("#baotuan").change(function(){ //选择文件
            $("#baotuan1").ajaxSubmit({
                dataType:  'json', //数据格式为json
                beforeSend: function() { //开始上传
                    progress.show(); //显示进度条
                    var percentVal = '0%';
                    percent.html(percentVal);
                },
                uploadProgress: function(event, position, total, percentComplete) {
                    var percentVal = percentComplete + '%'; //获得进度
                    percent.html(percentVal); //显示上传进度百分比
                },
                success: function(data) { //成功
                    console.log(data);
                    var img = '<img src="'+data[0]["savepath"].substr(1)+data[0]["savename"]+'" height="80" ><input type="hidden" name="join_pic" id="pic2" value="'+data[0]["savepath"].substr(1)+data[0]["savename"]+'"></input>';
                    $('.baotuan_showimge').html(img);
                    progress.hide();
                },
                error:function(xhr){ //上传失败
                    //console.log(xhr.status)
                }
            });
        });

    })


    function toVaild(){
        var type = $.trim($('#type').val());
        var name = $.trim($('#name').val());
        var age = $.trim($('#age').val());
        var experience = $.trim($('#experience').val());
        var education = $.trim($('#education').val());
        var workingplace = $.trim($('#workingplace').val());
        var worknature = $.trim($('#worknature').val());
        var salarytreatment = $.trim($('#salarytreatment').val());
        var numbers = $.trim($('#numbers').val());


        if(type==''||type==null){
            alert('请填写职位类别');
            $('#type').focus();
            return false;
        }

        if(name==''||name==null){
            alert('请填写职位名称');
            $('#name').focus();
            return false;
        }
        if(age==''||age==null){
            alert('请填写年龄要求');
            $('#age').focus();
            return false;
        }
        if(experience==''||experience==null){
            alert('请填写经验要求');
            $('#experience').focus();
            return false;
        }
        if(education==''||education==null){
            alert('请填写学历要求');
            $('#experience').focus();
            return false;
        }
        if(workingplace==''||workingplace==null){
            alert('请填写工作地点');
            $('#workingplace').focus();
            return false;
        }

        if(worknature==''||worknature==null){
            alert('请填写工作性质');
            $('#workingplace').focus();
            return false;
        }
        if(salarytreatment==''||salarytreatment==null){
            alert('请填写工资待遇');
            $('#salarytreatment').focus();
            return false;
        }
        if(numbers==''||numbers==null){
            alert('请填写招聘人数');
            $('#numbers').focus();
            return false;
        }

        $.ajax({
            url:'/Admin/Index/addJoin',
            type:'post',
            data:$("form").serialize(),
            dataType:'json',
            success:function(g){
                if(g.status == 1){
                    alert(g.info);
                    setTimeout(href,1200);
                    return false;
                }else{
                    alert(g.info);
                    return false;

                }

            }
        })
}

function href() {
    location.href="{:U('/Admin/Index/joinList')}";
}

</script>
<!--提交表单前验证end-->

<!--上传图片-->

<!--<script type="text/javascript" src="__JS__/jquery.js"></script>-->
<script type="text/javascript" src="__JS__/uploadPreview.min.js"></script>

<script type="text/javascript" src="__JS__/jquery-form.js"></script>
<script type="text/javascript">
    function num(obj){
        obj.value = obj.value.replace(/[^\d]/g,""); //清除"数字"和以外的字符
    }
  /*function add_re(r){
   $('#restriction'+r).show();
 }
 function del_re(r){
   $('#restriction'+r).hide();
 }*/
</script>
<script>
    /*;!function(){
        laydate({
            elem: '#demo',
            format: 'YYYY-MM-DD hh:mm:ss',
        })

    }();*/

    /*;!function(){
        laydate({
            elem: '#demo1',
            format: 'YYYY-MM-DD hh:mm:ss',
        })

    }();*/

    /*;!function(){
        laydate({
            elem: '#demo2',
            format: 'YYYY',
        })

    }();
    ;!function(){
        laydate({
            elem: '#demo3',
            format: 'YYYY',
        })

    }();*/
</script>












